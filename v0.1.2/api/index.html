<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MixedModelsExtras.jl API · MixedModelsExtras</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MixedModelsExtras</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">MixedModelsExtras.jl Documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>MixedModelsExtras.jl API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MixedModelsExtras.jl API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/palday/MixedModelsExtras.jl/blob/master/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="MixedModelsExtras.jl-API"><a class="docs-heading-anchor" href="#MixedModelsExtras.jl-API">MixedModelsExtras.jl API</a><a id="MixedModelsExtras.jl-API-1"></a><a class="docs-heading-anchor-permalink" href="#MixedModelsExtras.jl-API" title="Permalink"></a></h1><h2 id="Coefficient-of-Determination"><a class="docs-heading-anchor" href="#Coefficient-of-Determination">Coefficient of Determination</a><a id="Coefficient-of-Determination-1"></a><a class="docs-heading-anchor-permalink" href="#Coefficient-of-Determination" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="StatsBase.r2" href="#StatsBase.r2"><code>StatsBase.r2</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">r2(model::StatisticalModel)
r²(model::StatisticalModel)</code></pre><p>Coefficient of determination (R-squared).</p><p>For a linear model, the R² is defined as <span>$ESS/TSS$</span>, with <span>$ESS$</span> the explained sum of squares and <span>$TSS$</span> the total sum of squares.</p></div></section><section><div><pre><code class="nohighlight hljs">r2(model::StatisticalModel, variant::Symbol)
r²(model::StatisticalModel, variant::Symbol)</code></pre><p>Pseudo-coefficient of determination (pseudo R-squared).</p><p>For nonlinear models, one of several pseudo R² definitions must be chosen via <code>variant</code>. Supported variants are:</p><ul><li><code>:MacFadden</code> (a.k.a. likelihood ratio index), defined as <span>$1 - \log (L)/\log (L_0)$</span>;</li><li><code>:CoxSnell</code>, defined as <span>$1 - (L_0/L)^{2/n}$</span>;</li><li><code>:Nagelkerke</code>, defined as <span>$(1 - (L_0/L)^{2/n})/(1 - L_0^{2/n})$</span>.</li><li><code>:devianceratio</code>, defined as <span>$1 - D/D_0$</span>.</li></ul><p>In the above formulas, <span>$L$</span> is the likelihood of the model, <span>$L_0$</span> is the likelihood of the null model (the model with only an intercept), <span>$D$</span> is the deviance of the model (from the saturated model), <span>$D_0$</span> is the deviance of the null model, <span>$n$</span> is the number of observations (given by <a href="@ref"><code>nobs</code></a>).</p><p>The Cox-Snell and the deviance ratio variants both match the classical definition of R² for linear models.</p></div></section><section><div><pre><code class="nohighlight hljs">r2(model::LinearMixedModel; conditional=false)
r²(model::LinearMixedModel; conditional=false)</code></pre><p>Coefficient of determination (R-squared).</p><p>R² is very non trivial for mixed models for a number of reasons and the measures here are particularly simplistic. For <code>conditional=true</code>, the Pearson correlation between the fitted and observed values is simply squared, in line with the relationship between the coefficient of determination and the Pearson correlation for classical OLS models. For <code>conditional=false</code>, new predicted values are generated based on only the fixed-effects estimates and the correlation between these predictions and the observed values is again squared.</p><p>In both cases, it is important to note that despite the usual naming convention (R² for the coefficient of determination and r for Pearson&#39;s correlation coefficient), these quantitaties are not defined in terms of the other. Instead, the correlation is a standardized measure of covariance and the coefficient of determination is measured relative to a null model. (The total sum of squares is in some sense the squared residual error of the null model.) Even generalizations of the coefficient of determination that define this value in terms of the likelihoods of an intercept-only model (i.e. the sample mean) and the likelihood of the fitted model fail to generalize to the mixed-model case: should &quot;intercept-only&quot; mean truly just the fixed effect (i.e. comparing the likelihoods of a classical OLS and a mixed-effects model)? or should it also include an random intercept for each grouping variable? What is the null model in this case, when determining whether each grouping variable contributes to overall fit? There is no single, clear, agreed-upon answer for these questions.  The bottom line is that there are many potential ways to define a coefficient of determination for linear mixed models (and even more for the generalzed case which combines all the problems of R² for GLM and for LMM) and none of them have all the properties of the coefficient of determination for classical OLS regression.</p><p>There are more advanced approximations (see e.g. Nakagawa and colleagues&#39; 2013 2017 papers) but the fundamental philosophical issues above remain. In the future, additional approximations may be supported, but this is not a high priority.  Pull requests are welcome.</p><p>For more information, see the <a href="https://bbolker.github.io/mixedmodels-misc/glmmFAQ.html#how-do-i-compute-a-coefficient-of-determination-r2-or-an-analogue-for-glmms">GLMM FAQ</a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/palday/MixedModelsExtras.jl/blob/e065684b8de131454a52e3ad25e7b1108d3750dc/src/r2.jl#L1-L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StatsBase.adjr2" href="#StatsBase.adjr2"><code>StatsBase.adjr2</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">adjr2(model::StatisticalModel)
adjr²(model::StatisticalModel)</code></pre><p>Adjusted coefficient of determination (adjusted R-squared).</p><p>For linear models, the adjusted R² is defined as <span>$1 - (1 - (1-R^2)(n-1)/(n-p))$</span>, with <span>$R^2$</span> the coefficient of determination, <span>$n$</span> the number of observations, and <span>$p$</span> the number of coefficients (including the intercept). This definition is generally known as the Wherry Formula I.</p></div></section><section><div><pre><code class="nohighlight hljs">adjr2(model::StatisticalModel, variant::Symbol)
adjr²(model::StatisticalModel, variant::Symbol)</code></pre><p>Adjusted pseudo-coefficient of determination (adjusted pseudo R-squared).</p><p>For nonlinear models, one of the several pseudo R² definitions must be chosen via <code>variant</code>. The only currently supported variants are <code>:MacFadden</code>, defined as <span>$1 - (\log (L) - k)/\log (L0)$</span> and <code>:devianceratio</code>, defined as <span>$1 - (D/(n-k))/(D_0/(n-1))$</span>. In these formulas, <span>$L$</span> is the likelihood of the model, <span>$L0$</span> that of the null model (the model including only the intercept), <span>$D$</span> is the deviance of the model, <span>$D_0$</span> is the deviance of the null model, <span>$n$</span> is the number of observations (given by <a href="@ref"><code>nobs</code></a>) and <span>$k$</span> is the number of consumed degrees of freedom of the model (as returned by <a href="@ref"><code>dof</code></a>).</p></div></section><section><div><pre><code class="nohighlight hljs">adjr2(model::LinearMixedModel; conditional=false)
adjr²(model::LinearMixedModel; conditional=false)</code></pre><p>Adjusted coefficient of determination (adjusted R-squared).</p><p>For linear models, the adjusted R² is defined as <span>$(1 - (1-R^2)(n-1)/(n-p))$</span>, with <span>$R^2$</span> the coefficient of determination, <span>$n$</span> the number of observations, and <span>$p$</span> the number of coefficients (including the intercept). This definition is generally known as the Wherry Formula I.</p><p>For mixed-models, we use this same adjustment for the R² value computed with <a href="#StatsBase.r2"><code>r2</code></a>. <code>conditional</code> whether or not the random effects are taken into account when computing the quality of the model fit. They are nonetheless included in the adjustment (i.e. as number <span>$p$</span> of parameters).</p><p>R² is not a clearly defined concept for mixed models, nor does it have all the properties typically expected of the coefficient of determination. See <a href="#StatsBase.r2"><code>r2</code></a> for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/palday/MixedModelsExtras.jl/blob/e065684b8de131454a52e3ad25e7b1108d3750dc/src/r2.jl#L51-L70">source</a></section></article><h2 id="Intra-Class-Correlation-Coefficient"><a class="docs-heading-anchor" href="#Intra-Class-Correlation-Coefficient">Intra-Class Correlation Coefficient</a><a id="Intra-Class-Correlation-Coefficient-1"></a><a class="docs-heading-anchor-permalink" href="#Intra-Class-Correlation-Coefficient" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MixedModelsExtras.icc" href="#MixedModelsExtras.icc"><code>MixedModelsExtras.icc</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">icc(model::MixedModel, [groups])</code></pre><p>Compute the intra-class correlation coefficient (ICC) for a mixed model.</p><p>The ICC is defined as the variance attributable to the <code>groups</code> divided by the total variance from all groups and the observation-level (residual) variance. In other words, the ICC can be interpreted as the proportion of the variance explainable by the grouping/nesting structure.</p><p>A single <code>group</code> can be specified as a Symbol, e.g. <code>:subj</code> or a number of groups can be specified as an array: <code>[:subj, :item]</code>. If no <code>groups</code> are specified, then all grouping variables are used.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The value returned here is sometimes called the &quot;adjusted ICC&quot; and does not take the variance of the fixed effects into account (the &quot;conditional ICC&quot;).</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The result returned aggregates across groups. If you require the ICC for each group separately, then you must call <code>icc</code> separately for each group.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/palday/MixedModelsExtras.jl/blob/e065684b8de131454a52e3ad25e7b1108d3750dc/src/icc.jl#L16-L37">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.6 on <span class="colophon-date" title="Tuesday 7 September 2021 21:45">Tuesday 7 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
